<div class="container">
    <div class="gradient-banner">
      <div class="gradient-overlay"></div>
      <!-- Contenido opcional sobre el banner -->
      <div class="banner-content">
        <h1>Bienvenido a SICODIS</h1>
        <p>El Sistema de información y consulta de distribuciones de recursos "SICODIS", presenta información agregada y detallada, 
          correspondiente a las distribuciones de los recursos del Sistema General de Participaciones (SGP) y el Sistema General de Regalías (SGR) realizadas por el DNP.
 	 	 	 	</p>        
      </div>
    </div>
    <!-- <div class="banner">
        <img src="/assets/img/banner_welcome.svg" alt="banner-welcome">
    </div> -->
    <div class="reports">
        <div class="grid-container">
          <mat-grid-list [cols]="cols2" rowHeight="500" gutterSize="16">
            <mat-grid-tile>
              <p-card class="card-container sgp-card">
                <div class="card-header">
                  <img class="img-icon" src="/assets/img/icon-sgp.png" alt="Icono del Sistema General de Participaciones">
                  <h2 class="sicodis-large-title">{{titleSGP}}</h2>
                </div>
                <div class="card-description">
                  <p>{{descriptionSGP}}</p>
                </div>
                <div class="card-menu">
                  <div class="sicodis-item" (click)="redirectTo('reports-sgp')">
                    <p>Distribución presupuestal, documentos y anexos</p>
                    <span class="pi pi-angle-right"></span>
                  </div>
                  <p-divider/>
                  <div class="sicodis-item" (click)="redirectTo('reports-sgp-dist')">
                    <p>Ficha comparativa de distribución, criterios y variables</p>
                    <span class="pi pi-angle-right"></span>
                  </div>
                  <p-divider />
                  <div class="sicodis-item" (click)="redirectTo('reports-sgp-budget')">
                    <p>Ficha SGP - Presupuestal</p>
                    <span class="pi pi-angle-right"></span>
                  </div>
                </div>
                <ng-template pTemplate="footer">
                  <div class="card-footer">
                    <button pButton type="button" label="Ver todos los reportes del SGP" (click)="redirectSGP()" class="p-button-primary"></button>
                  </div>
                </ng-template>
              </p-card>
            </mat-grid-tile>
            <mat-grid-tile>
              <p-card class="card-container sgr-card">
                <div class="card-header">
                  <img class="img-icon" src="/assets/img/icon-sgr.png" alt="Icono del Sistema General de Regalías">
                  <h2 class="sicodis-large-title">{{titleSGR}}</h2>
                </div>
                <div class="card-description">
                  <p>{{descriptionSGR}}</p>
                </div>
                <div class="card-menu">
                  <div class="sicodis-item" (click)="redirectTo('reports-sgr')">
                    <p>Plan de Recursos</p>
                    <span class="pi pi-angle-right"></span>
                  </div>
                  <p-divider/>
                  <div class="sicodis-item" (click)="redirectTo('reports-sgr-comparative')">
                    <p>Comparativo de Avance IAC frente a Presupuesto</p>
                    <span class="pi pi-angle-right"></span>
                  </div>
                  <p-divider />
                  <div class="sicodis-item" (click)="redirectTo('reports-sgr-bienal')">
                    <p>Plan Bienal de Caja</p>
                    <span class="pi pi-angle-right"></span>
                  </div>
                </div>
                <ng-template pTemplate="footer">
                  <div class="card-footer">
                    <button pButton type="button" label="Ver todos los reportes del SGR" (click)="redirectSGR()" class="p-button-primary"></button>
                  </div>
                </ng-template>
              </p-card>
            </mat-grid-tile>
          </mat-grid-list>
        </div>

        <div class="grid-container" style="margin-top: 16px;">          
              <p-card class="card-container pgn-card pgn-full-width">
                <div class="card-header">
                  <img class="img-icon" src="/assets/img/icon-pgn.png" alt="Icono del Presupuesto General de la Nación">
                  <h2 class="sicodis-large-title">{{titlePGN}}</h2>
                </div>
                <div class="card-description">
                  <p>{{descriptionPGN}}</p>
                </div>
                <ng-template pTemplate="footer">
                  <div class="card-footer">
                    <button pButton type="button" label="Ver información del PGN" (click)="redirectTo('pgn-regionalizacion')" class="p-button-primary"></button>
                  </div>
                </ng-template>
              </p-card>          
        </div>

    <h2 class="sicodis sicodis-subtitle">Consulte a continuación la información vigente de los dos sistemas</h2>
    <p class="sicodis-p">Cifras en pesos corrientes</p>
    
    <div class="filter-panel" style="display:none;">
      <mat-card class="card-container">
        <h2 class="sicodis sicodis-subtitle-2">Entidad a consultar</h2>
        <div class="filter-controls">
          <div class="filter-item">
            <label for="departments">Departamentos</label>
            <select id="departments" class="form-select">
              <option value="">Seleccione un departamento</option>
              <option *ngFor="let dept of departments" [value]="dept.id">{{dept.name}}</option>
            </select>
          </div>
          <div class="filter-item">
            <label for="municipalities">Municipios</label>
            <select id="municipalities" class="form-select" [disabled]="!selectedDepartment">
              <option value="">Seleccione un municipio</option>
              <option *ngFor="let mun of municipalities" [value]="mun.id">{{mun.name}}</option>
            </select>
          </div>
          <div class="filter-buttons">
            <button pButton type="button" label="Actualizar" class="p-button-primary"></button>
            <button pButton type="button" label="Borrar filtros" class="p-button-secondary"></button>
          </div>
        </div>
      </mat-card>
    </div>

    <div class="assignment-cards">
      <mat-grid-list [cols]="2" rowHeight="870px" gutterSize="8">
        <mat-grid-tile style="align-items: flex-start;">
          <mat-card class="card-container" style="height: 100%; display: flex; flex-direction: column;">
            <h2 class="sicodis-subtitle">SGP</h2>
            <p-table [value]="sgpItems" 
                     [tableStyle]="{ 'min-width': '100%' }"
                     styleClass="home-sgp-table">
              <ng-template pTemplate="header">
                <tr>
                  <th class="table-header">Concepto</th>
                  <th class="table-header">Total Presupuesto</th>
                  <th class="table-header">Avance Distribución</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-item>
                <tr [ngClass]="{'total-row': item.isTotal}">
                  <td [ngClass]="{'bold': item.isTotal}"><strong *ngIf="item.isTotal">{{item.concept}}</strong><span *ngIf="!item.isTotal">{{item.concept}}</span></td>
                  <td [ngClass]="{'bold': item.isTotal}" style="text-align: right;"><strong *ngIf="item.isTotal">{{item.amount | numberFormat}}</strong><span *ngIf="!item.isTotal">{{item.amount | numberFormat}}</span></td>
                  <td [ngClass]="{'bold': item.isTotal}" style="text-align: right;"><strong *ngIf="item.isTotal">{{item.avanceDistribucion | number:'1.2-2'}}%</strong><span *ngIf="!item.isTotal">{{item.avanceDistribucion | number:'1.2-2'}}%</span></td>
                </tr>
              </ng-template>
            </p-table>

            <div style="text-align: center; padding-top: 1rem;padding-bottom: 1rem;">              
              <button pButton type="button" 
                      label="Más información" 
                      class="p-button-primary" 
                      (click)="redirectSGP()">
              </button>              
            </div>
            
            <!-- Gráfico donut de avance -->
            <div style="padding: 1rem; text-align: center;">
              <div style="position: relative; height: 200px; margin: 0 auto;">
                <p-chart type="doughnut" 
                         [data]="donutSgpData" 
                         [options]="donutSgpOptions" 
                         [style]="{'height': '200px'}"
                         *ngIf="donutSgpData">
                </p-chart>
              </div>
            </div>            
            
          </mat-card>
        </mat-grid-tile>
        <mat-grid-tile style="align-items: flex-start;">
          <mat-card class="card-container" style="height: 100%; display: flex; flex-direction: column;">
            <h2 class="sicodis-subtitle">SGR</h2>
            <p-table [value]="sgrItems" 
                     [tableStyle]="{ 'min-width': '100%' }"
                     styleClass="home-sgr-table">
              <ng-template pTemplate="header">
                <tr>
                  <th class="table-header">Concepto</th>
                  <th class="table-header">Total Presupuesto</th>
                  <th class="table-header">Avance Distribución</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-item>
                <tr [ngClass]="{'total-row': item.isTotal}">
                  <td [ngClass]="{'bold': item.isTotal || item.isFirst}">
                    <strong *ngIf="item.isTotal || item.isFirst">{{item.concept}}</strong>
                    <span *ngIf="!item.isTotal && !item.isFirst">{{item.concept}}</span>
                  </td>
                  <td [ngClass]="{'bold': item.isTotal || item.isFirst}" style="text-align: right;">
                    <strong *ngIf="item.isTotal || item.isFirst">{{item.amount | numberFormat}}</strong>
                    <span *ngIf="!item.isTotal && !item.isFirst">{{item.amount | numberFormat}}</span>
                  </td>
                  <td [ngClass]="{'bold': item.isTotal}" style="text-align: right;">
                    <strong *ngIf="item.isTotal">{{item.progress | number:'1.2-2'}}%</strong>
                    <span *ngIf="!item.isTotal">{{item.progress | number:'1.2-2'}}%</span>
                  </td>
                </tr>
              </ng-template>
            </p-table>
            
            <div style="text-align: center; padding-top: 1rem;padding-bottom: 1rem;">              
              <button pButton type="button" 
                      label="Detalle Inversión" 
                      class="p-button-primary">
              </button>
              <button pButton type="button" style="margin-left: 1rem;"
                      label="Detalle Administración"
                      class="p-button-primary">
              </button>
              
            </div>
            
            <!-- Gráficos donut SGR - Vertical -->
            <div style="display: flex; flex-direction: column; gap: 1rem; padding: 1rem;">
              <!-- Gráfico corrientes (naranja) -->
              <div style="text-align: center;">
                <div style="position: relative; height: 180px; margin: 0 auto;">
                  <p-chart type="doughnut" 
                           [data]="donutSgrCorrientesData" 
                           [options]="donutSgrCorrientesOptions" 
                           [style]="{'height': '180px'}"
                           *ngIf="donutSgrCorrientesData">
                  </p-chart>
                </div>
              </div>
              
              <!-- Gráfico otros (verde agua) -->
              <div style="text-align: center;padding-top: 5.5rem;">
                <div style="position: relative; height: 180px; margin: 0 auto;">
                  <p-chart type="doughnut" 
                           [data]="donutSgrOtrosData" 
                           [options]="donutSgrOtrosOptions" 
                           [style]="{'height': '180px'}"
                           *ngIf="donutSgrOtrosData">
                  </p-chart>
                </div>
              </div>
            </div>
          </mat-card>
        </mat-grid-tile>
      </mat-grid-list>
    </div>

    <div class="grid-container geovisor-section">
      <p-card class="card-container geovisor-card pgn-full-width">
        <div class="card-header">
          <img class="img-icon" src="/assets/img/icon-geovisor.svg" alt="Icono del Geovisor">
          <h2 class="sicodis-large-title">{{titleGeovisor}}</h2>
        </div>
        <div class="card-description">
          <p>{{descriptionGeovisor}}</p>
        </div>
        <ng-template pTemplate="footer">
          <div class="card-footer">
            <button pButton type="button" label="Ir al Geovisor" (click)="redirectTo('reports-map')" class="p-button-primary"></button>
          </div>
        </ng-template>
      </p-card>
    </div>

    <h2 class="reports-title">Información de Interés</h2>

        <div class="grid-container">
          <mat-grid-list [cols]="cols" rowHeight="300px" gutterSize="16">
            <mat-grid-tile *ngFor="let card of cards">
              <mat-card class="card-container">
                <img mat-card-image [src]="card.imageUrl" [alt]="card.title + ' - Imagen ilustrativa'">
                <p class="description">{{card.description}}</p>
                <mat-card-header>
                  <h3 class="sicodis-title">{{card.title}}</h3>
                </mat-card-header>                
              </mat-card>
            </mat-grid-tile>
          </mat-grid-list>
        </div>
    
    <div class="sicodis-questions" style="display:none;">
      <img class="overlay-questions" src="/assets/img/overlay-questions.svg" alt="Imagen decorativa de preguntas frecuentes">
      <div>
        <h2 class="title-questions">¿Tiene Preguntas acerca de SICODIS?</h2>
      </div>
      <div>
        <p>
          En SICODIS encontrará información detallada sobre la distribución de recursos asociada a diferentes recursos
        </p>
      </div>
      <div style="padding-bottom: 1rem;">
        <ul>
          <li>
            ¿Cómo encontrar un reporte?
          </li>
          <li>
            ¿Cómo descargar un elemento?
          </li>
          <li>
            No se preocupe, acá respondemos sus preguntas
          </li>
        </ul>
      </div>
      <div>
        <button pButton type="button" label="Ir a preguntas frecuentes" class="p-button-primary" (click)="redirectToFAQ()"></button>
      </div>
    </div>

    <p-divider />    

</div>
